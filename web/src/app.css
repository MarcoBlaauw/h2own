@import './lib/styles/tokens.css';
@import 'tailwindcss';

@layer base {
  :root {
    font-family: var(--font-family-sans);
    color: rgb(var(--color-content-primary));
    background-color: rgb(var(--color-bg-surface));
  }

  html,
  body,
  #svelte {
    min-height: 100%;
  }

  body {
    margin: 0;
    background-color: rgb(var(--color-bg-surface));
    color: rgb(var(--color-content-primary));
    font-family: inherit;
    line-height: var(--line-height-normal);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-family-sans);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    margin: 0;
  }

  p {
    margin: 0;
    font-size: var(--font-size-md);
    line-height: var(--line-height-normal);
  }

  a {
    color: rgb(var(--color-accent));
    text-decoration: none;
    font-weight: var(--font-weight-medium);
  }

  a:hover,
  a:focus-visible {
    color: rgb(var(--color-accent-strong));
    text-decoration: underline;
  }

  code,
  pre {
    font-family: var(--font-family-mono);
    background-color: rgb(var(--color-bg-inset));
    border-radius: var(--radius-xs);
  }

  code {
    padding: 0 0.25rem;
  }

  pre {
    padding: var(--space-sm);
    overflow: auto;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-md font-semibold text-sm transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-60;
    --tw-ring-color: rgb(var(--color-accent));
  }

  .btn-sm {
    @apply h-9 px-3;
  }

  .btn-base {
    @apply h-11 px-4;
  }

  .btn-icon-base {
    @apply h-10 w-10 rounded-full text-lg;
  }

  .btn-primary {
    background-color: rgb(var(--color-accent));
    color: rgb(var(--color-accent-contrast));
    box-shadow: var(--shadow-soft);
  }

  .btn-primary:hover {
    background-color: rgb(var(--color-accent-strong));
  }

  .btn-primary:focus-visible {
    --tw-ring-color: rgb(var(--color-accent-strong));
  }

  .btn-secondary {
    background-color: rgb(var(--color-bg-subtle) / 0.9);
    color: rgb(var(--color-content-primary));
    box-shadow: var(--shadow-soft);
  }

  .btn-secondary:hover {
    background-color: rgb(var(--color-bg-inset));
  }

  .btn-secondary:focus-visible {
    --tw-ring-color: rgb(var(--color-border));
  }

  .dark .btn-secondary {
    background-color: rgb(var(--color-bg-inset) / 0.7);
    color: rgb(var(--color-content-primary));
  }

  .dark .btn-secondary:hover {
    background-color: rgb(var(--color-bg-inset));
  }

  .btn-tonal {
    background-color: rgb(var(--color-accent) / 0.15);
    color: rgb(var(--color-accent-strong));
  }

  .btn-tonal:hover {
    background-color: rgb(var(--color-accent) / 0.25);
  }

  .btn-tonal:focus-visible {
    --tw-ring-color: rgb(var(--color-accent) / 0.4);
  }

  .dark .btn-tonal {
    background-color: rgb(var(--color-accent) / 0.2);
  }

  .btn-outline-danger {
    @apply border;
    border-color: rgb(var(--color-danger) / 0.6);
    color: rgb(var(--color-danger));
  }

  .btn-outline-danger:hover {
    background-color: rgb(var(--color-danger) / 0.1);
  }

  .btn-outline-danger:focus-visible {
    --tw-ring-color: rgb(var(--color-danger) / 0.4);
  }

  .surface-card {
    @apply rounded-xl border backdrop-blur-sm transition-shadow duration-200;
    border-color: rgb(var(--color-border) / 0.7);
    background-color: rgb(var(--color-bg-raised) / 0.95);
    box-shadow: var(--shadow-soft);
  }

  .dark .surface-card {
    border-color: rgb(var(--color-border-strong) / 0.7);
    background-color: rgb(var(--color-bg-inset) / 0.8);
  }

  .dark .surface-card[data-status='success'] {
    border-color: rgb(var(--color-success) / 0.7);
    background-color: rgb(var(--color-success) / 0.2);
  }

  .dark .surface-card[data-status='warning'] {
    border-color: rgb(var(--color-warning) / 0.6);
    background-color: rgb(var(--color-warning) / 0.2);
  }

  .dark .surface-card[data-status='danger'] {
    border-color: rgb(var(--color-danger) / 0.7);
    background-color: rgb(var(--color-danger) / 0.2);
  }

  .dark .surface-card[data-status='info'] {
    border-color: rgb(var(--color-info) / 0.6);
    background-color: rgb(var(--color-info) / 0.2);
  }

  .card-body {
    @apply p-5 sm:p-6;
  }

  .form-grid {
    @apply grid gap-4 sm:grid-cols-2;
  }

  .form-field {
    @apply flex flex-col gap-1.5;
  }

  .form-label {
    @apply text-sm font-medium;
    color: rgb(var(--color-content-secondary));
  }

  .form-label[data-variant='caps'] {
    @apply text-xs font-semibold uppercase tracking-wide;
    color: rgb(var(--color-content-secondary));
  }

  .form-control {
    @apply w-full rounded-lg border px-4 py-2.5 text-sm shadow-sm transition focus:outline-none focus:ring-2 disabled:cursor-not-allowed disabled:opacity-70;
    border-color: rgb(var(--color-border));
    background-color: rgb(var(--color-bg-subtle) / 0.8);
    color: rgb(var(--color-content-primary));
  }

  .form-control:focus {
    border-color: rgb(var(--color-accent));
    --tw-ring-color: rgb(var(--color-accent) / 0.4);
  }

  .form-control[data-invalid='true'] {
    border-color: rgb(var(--color-danger));
    background-color: rgb(var(--color-danger) / 0.1);
    color: rgb(var(--color-danger));
    --tw-ring-color: rgb(var(--color-danger) / 0.3);
  }

  .form-control:disabled {
    border-color: rgb(var(--color-border) / 0.6);
    background-color: rgb(var(--color-bg-subtle) / 0.4);
    color: rgb(var(--color-content-muted) / 0.8);
  }

  .dark .form-control {
    border-color: rgb(var(--color-border-strong));
    background-color: rgb(var(--color-bg-inset) / 0.7);
    color: rgb(var(--color-content-primary));
  }

  .dark .form-control:disabled {
    border-color: rgb(var(--color-border-strong) / 0.6);
    background-color: rgb(var(--color-bg-inset) / 0.5);
  }

  .dark .form-control[data-invalid='true'] {
    background-color: rgb(var(--color-danger) / 0.2);
  }

  .form-select {
    @apply appearance-none pr-10;
  }

  .form-textarea {
    @apply align-top py-3;
  }

  .form-helper {
    @apply text-xs;
    color: rgb(var(--color-content-secondary) / 0.8);
  }

  .form-message {
    @apply text-xs font-medium;
    color: rgb(var(--color-content-secondary));
  }

  .form-message[data-state='error'] {
    color: rgb(var(--color-danger));
  }

  .form-message[data-state='success'] {
    color: rgb(var(--color-success));
  }

  .form-feedback {
    @apply rounded-lg px-3 py-2 text-sm font-medium;
  }

  .form-feedback[data-state='error'] {
    background-color: rgb(var(--color-danger) / 0.1);
    color: rgb(var(--color-danger));
  }

  .form-feedback[data-state='success'] {
    background-color: rgb(var(--color-success) / 0.1);
    color: rgb(var(--color-success));
  }

  .form-fieldset {
    @apply grid gap-4 rounded-xl border p-4 sm:grid-cols-2;
    border-color: rgb(var(--color-border) / 0.6);
    background-color: rgb(var(--color-bg-subtle) / 0.8);
  }

  .dark .form-fieldset {
    border-color: rgb(var(--color-border-strong) / 0.6);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .form-legend {
    @apply text-sm font-semibold;
    color: rgb(var(--color-content-secondary));
  }

  .form-option {
    @apply flex items-center gap-3 text-sm;
    color: rgb(var(--color-content-secondary));
  }

  .surface-panel {
    @apply rounded-xl border px-4 py-3 transition;
    border-color: rgb(var(--color-border) / 0.6);
    background-color: rgb(var(--color-bg-subtle) / 0.9);
  }

  .dark .surface-panel {
    border-color: rgb(var(--color-border-strong) / 0.6);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .status-chip {
    @apply inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-wide transition;
    border-color: rgb(var(--color-border) / 0.6);
    background-color: rgb(var(--color-bg-subtle) / 0.9);
    color: rgb(var(--color-content-primary));
  }

  .status-chip[data-status='success'] {
    border-color: rgb(var(--color-success) / 0.55);
    background-color: rgb(var(--color-bg-subtle) / 0.9);
  }

  .status-chip[data-status='warning'] {
    border-color: rgb(var(--color-warning) / 0.55);
    background-color: rgb(var(--color-bg-subtle) / 0.9);
  }

  .status-chip[data-status='danger'] {
    border-color: rgb(var(--color-danger) / 0.55);
    background-color: rgb(var(--color-bg-subtle) / 0.9);
  }

  .status-chip[data-status='info'] {
    border-color: rgb(var(--color-info) / 0.55);
    background-color: rgb(var(--color-bg-subtle) / 0.9);
  }

  .status-chip[data-status='neutral'] {
    border-color: rgb(var(--color-border) / 0.6);
    background-color: rgb(var(--color-bg-subtle) / 0.8);
    color: rgb(var(--color-content-secondary));
  }

  .dark .status-chip {
    border-color: rgb(var(--color-border-strong) / 0.6);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .dark .status-chip[data-status='success'] {
    border-color: rgb(var(--color-success) / 0.65);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .dark .status-chip[data-status='warning'] {
    border-color: rgb(var(--color-warning) / 0.65);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .dark .status-chip[data-status='danger'] {
    border-color: rgb(var(--color-danger) / 0.65);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .dark .status-chip[data-status='info'] {
    border-color: rgb(var(--color-info) / 0.65);
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .status-chip__indicator {
    @apply inline-block h-2 w-2 rounded-full;
    background-color: rgb(var(--color-border) / 0.6);
  }

  .status-chip[data-status='success'] .status-chip__indicator {
    background-color: rgb(var(--color-success));
  }

  .status-chip[data-status='warning'] .status-chip__indicator {
    background-color: rgb(var(--color-warning));
  }

  .status-chip[data-status='danger'] .status-chip__indicator {
    background-color: rgb(var(--color-danger));
  }

  .status-chip[data-status='info'] .status-chip__indicator {
    background-color: rgb(var(--color-info));
  }

  .skeleton-stack {
    @apply animate-pulse space-y-2.5;
  }

  .skeleton-line {
    @apply h-3 rounded-full transition;
    background-color: rgb(var(--color-bg-subtle) / 0.8);
  }

  .dark .skeleton-line {
    background-color: rgb(var(--color-bg-inset) / 0.7);
  }

  .skeleton-line[data-variant='short'] {
    @apply w-1/2;
  }

  .skeleton-line[data-variant='medium'] {
    @apply w-3/4;
  }

  .skeleton-line[data-variant='full'] {
    @apply w-full;
  }
}
